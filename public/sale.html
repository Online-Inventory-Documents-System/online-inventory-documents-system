<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Sale - Inventory System</title>
<link rel="stylesheet" href="css/style.css"/>
</head>
<body>
<header>
  <h1>‚ûï New Sales Transaction</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="inventory.html">Inventory</a>
    <a href="orders.html">Orders</a>
    <a href="sales.html">Sales</a>
    <a href="documents.html">Documents</a>
    <a href="log.html">Activity Log</a>
    <a href="setting.html" style="text-decoration: none;"><button>‚öôÔ∏è Setting</button></a>
    <button onclick="toggleTheme()">üåì Mode</button>
    <button onclick="logout()">üö™ Logout</button>
    <div id="adminInfo">Logged in as: <span id="adminName"></span></div>
  </nav>
</header>

<section>
  <form id="saleForm">
    <h2>Sale Details</h2>
    <div class="product-bar">
      <input id="customerName" placeholder="Customer Name" type="text" value="Customer Name" />
      <input id="contact" placeholder="Customer Contact/Email" type="text" />
      <select id="status">
        <option value="Pending">Pending</option>
        <option value="Approved">Approved (Updates Stock)</option>
        <option value="Cancelled">Cancelled</option>
      </select>
    </div>

    <h3 style="margin-top: 20px;">Add Sale Items (Unit Price is Unit Price from Inventory)</h3>
    <div class="product-bar">
      <select id="itemSelect" style="flex: 2;">
        </select>
      <input id="itemQuantity" placeholder="Quantity" type="number" min="1" value="1" style="flex: 1;" />
      <button id="addItemBtn" type="button" class="success-btn" style="flex: 0.5;">‚ûï Add Item</button>
    </div>

    <div class="table-container" style="margin-top: 15px;"> 
      <table id="saleItemsTable">
          <thead>
              <tr>
                  <th>Item Name</th>
                  <th>SKU</th>
                  <th>Quantity</th>
                  <th class="money">Unit Price</th>
                  <th class="money">Total</th>
                  <th class="actions">Actions</th>
              </tr>
          </thead>
          <tbody id="lineItems">
              </tbody>
      </table>
    </div>

    <div class="totals" style="margin-top: 20px;">
      <div>Subtotal: <span id="subtotal">RM 0.00</span></div>
      <div>Tax (<span id="taxRateDisplay">0.00</span>%): <span id="taxAmount">RM 0.00</span></div>
      <div style="font-weight: bold; font-size: 1.2em;">Grand Total: <span id="grandTotal">RM 0.00</span></div>
    </div>
    
    <div style="margin-top: 20px; display: flex; gap: 10px;">
      <button id="saveSaleBtn" type="button" class="primary-btn" style="flex: 1;">üíæ Save Sale</button>
      <button id="cancelSaleBtn" type="button" class="secondary-btn" onclick="window.location.href='sales.html'" style="flex: 1;">‚Ü©Ô∏è Cancel & Back</button>
    </div>
    <p id="message" style="margin-top: 10px; text-align: center;"></p>
  </form>
</section>

<script src="js/setting.js" defer></script>
<script src="js/script.js" defer></script>
<script>
    document.documentElement.dataset.page = 'sale';
</script>
</body>
</html>
